<!DOCTYPE html>
<html>
<head>
    <title>Title of the document</title>

    <!-- <meta http-equiv="refresh" content="2"> -->
    <!-- this refreshes the brower every 2 secs -->

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/flow.css">

</head>
<body>
    <main class="main" >
        <div class="big-question">
            <div class="question">
                What is your age?
            </div>  
            <!-- TODO: change this form to post -->
            <form method="post" action="/flow/age.html" class="answer">
                <input type="number" name="age" placeholder="Your answer here... (in numbers)"></input>
                <input type="hidden" name="swidth" id="swidth"></input>
                <input type="hidden" name="sheight" id="sheight"></input>
                <input type="hidden" name="country" id="country"></input>
                <script> 
                    const promiseOfSomeData = fetch("https://ipapi.co/country_name").then(data => {
                        return data;
                    });
                    let country;
                    window.onload = async () => {
                        country = await promiseOfSomeJsonData;
                    };
                    const swidth = window.screen.width
                    const sheight = window.screen.height
                    
                    const countryInput = document.getElementById('country')
                    const swidthInput = document.getElementById('swidth')
                    const sheightInput = document.getElementById('sheight')

                    countryInput.value = country
                    swidthInput.value = swidth
                    sheightInput.value = sheight
                </script>
                <a onclick="this.parentNode.submit()">Next -></a>
            </form>
        </div>
    </main>
</body>

</html>
