<!DOCTYPE html>
<html>
<head>
    <title>Title of the document</title>

    <!-- <meta http-equiv="refresh" content="2"> -->
    <!-- this refreshes the brower every 2 secs -->

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/flow.css">

</head>
<body>
    <main class="main" >
        <div class="big-question">
            <div class="question">
                What is your age?
            </div>  
            <!-- TODO: change this form to post -->
            <form method="post" action="/flow/age.html" class="answer">
                <input type="number" required name="age" placeholder="Your answer here... (in numbers)"></input>
                <input type="hidden" name="swidth" id="swidth"></input>
                <input type="hidden" name="sheight" id="sheight"></input>
                <input type="hidden" name="country" id="country"></input>
                <script> 
                    const insertData = async () => {
                        const countryInput = document.getElementById('country')
                        const promiseOfSomeData = await fetch("https://ipapi.co/country_name").then(res => {
                            return res.text();
                        }).then(data => {
                            console.log(data)
                            countryInput.value = data;
                        }).catch(error => {
                            console.log('ad blocked country fetch')
                            countryInput.value = 'blocked';
                        })


                        const swidth = window.screen.width
                        const sheight = window.screen.height

                        const swidthInput = document.getElementById('swidth')
                        const sheightInput = document.getElementById('sheight')

                        swidthInput.value = swidth
                        sheightInput.value = sheight
                    }
                    insertData();
                </script>
                <a onclick="this.parentNode.submit()">Next -></a>
            </form>
        </div>
    </main>
</body>

</html>
